<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title></title>
    <script type="text/javascript" src="js/lib/jquery-1.8.0.min.js"></script>
    <script>
        $(function() {
            $("#btnUpload").click(function() {
                var files = $("#file1").get(0).files;
                if (files.length > 0) {
                    var data = new FormData();
                    for (i = 0; i < files.length; i++) {
                        data.append("file" + i, files[i]);
                    }
                    $.ajax({
                        type: "POST",
                        url: "api/upload",
                        contentType: false,
                        processData: false,
                        data: data,
                        success: function(results) {
                            if(results){
                                var img = $("<img width='320' src='api/Upload/"+results+"' />");
                                $("#preview").empty().append(img);
                            }
                        }
                    });
                }
            });
        });
    </script>
</head>
<body>
    <form name="form1" method="post" enctype="multipart/form-data" action="api/upload">
        <div>
            <label for="caption">Image Caption</label>
            <input name="caption" type="text" />    
        </div>
        <div>
            <label for="image1">Image File</label>
            <input name="image1" type="file" id="file1" />    
        </div>
        <div>
            <input type="button" value="Submit" id="btnUpload" />    
        </div>
    </form>
    <div id="preview"></div>
    <!-- <img src="api/Upload/BodyPart_dcf5ad72-4215-43d2-b72e-8b371793e802" /> -->
</body>
</html>
